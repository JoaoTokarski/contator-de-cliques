<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic Odyssey | A Nova Era dos Jogos Web</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        
        <div id="hud">
            <div class="hud-section">
                <div id="health-bar" class="bar">
                    <div class="fill" style="width: 100%"></div>
                    <span class="icon">‚ù§Ô∏è</span>
                </div>
                <div id="shield-bar" class="bar">
                    <div class="fill" style="width: 100%"></div>
                    <span class="icon">üõ°Ô∏è</span>
                </div>
            </div>
            
            <div class="hud-section center">
                <div id="weapon-display">
                    <div id="weapon-icon">üî´</div>
                    <div id="ammo">30/120</div>
                </div>
                <div id="ability-cooldown"></div>
            </div>
            
            <div class="hud-section">
                <div id="mission-display">
                    <h3>MISS√ÉO ATUAL</h3>
                    <p id="mission-text">Encontre a nave abandonada</p>
                    <div id="mission-progress">
                        <div class="progress-bar"></div>
                        <span>0%</span>
                    </div>
                </div>
                <div id="xp-display">
                    <div class="progress-bar"></div>
                    <span>N√≠vel 1 | 0/1000 XP</span>
                </div>
            </div>
        </div>
        
        <div id="dialogue-box" class="hidden">
            <div id="dialogue-portrait"></div>
            <div id="dialogue-content">
                <h3 id="dialogue-speaker">Comandante Rex</h3>
                <p id="dialogue-text">Soldado, precisamos que voc√™ investigue aquela anomalia no setor 4.</p>
                <div id="dialogue-options"></div>
            </div>
        </div>
        
        <div id="main-menu">
            <div class="menu-content">
                <h1>GALACTIC ODYSSEY</h1>
                <div class="menu-buttons">
                    <button id="new-game-btn" class="glow-btn">NOVA JORNADA</button>
                    <button id="continue-btn" class="glow-btn" disabled>CONTINUAR</button>
                    <button id="settings-btn" class="glow-btn">CONFIGURA√á√ïES</button>
                </div>
                <div class="menu-footer">
                    <p>Desenvolvido por <span>Cosmic Games Studio</span></p>
                    <div class="social-icons">
                        <span>üì±</span>
                        <span>üéÆ</span>
                        <span>üíª</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="pause-menu" class="hidden">
            <div class="menu-content">
                <h2>JOGO PAUSADO</h2>
                <div class="menu-buttons">
                    <button id="resume-btn" class="glow-btn">RETORNAR</button>
                    <button id="missions-btn" class="glow-btn">MISS√ïES</button>
                    <button id="inventory-btn" class="glow-btn">INVENT√ÅRIO</button>
                    <button id="quit-btn" class="glow-btn">SAIR</button>
                </div>
            </div>
        </div>
        
        <div id="notification" class="hidden">
            <div class="notification-icon">‚ö†Ô∏è</div>
            <p class="notification-text">Miss√£o atualizada: Encontre a nave abandonada</p>
        </div>
        
        <audio id="background-music" loop>
            <source src="" type="audio/mpeg">
            Seu navegador n√£o suporta √°udio.
        </audio>
    </div>
    
    <script>
        // Configura√ß√µes principais do jogo
        const GameConfig = {
            canvasWidth: window.innerWidth,
            canvasHeight: window.innerHeight,
            backgroundColor: '#0a0a1a',
            debugMode: false,
            player: {
                speed: 5,
                jumpForce: 15,
                health: 100,
                shield: 100,
                xp: 0,
                level: 1
            },
            weapons: {
                pistol: {
                    name: "Photon Pistol",
                    damage: 25,
                    ammo: 30,
                    maxAmmo: 120,
                    fireRate: 200,
                    icon: "üî´"
                },
                rifle: {
                    name: "Plasma Rifle",
                    damage: 15,
                    ammo: 60,
                    maxAmmo: 240,
                    fireRate: 100,
                    icon: "üí•"
                }
            },
            missions: [
                {
                    id: 1,
                    title: "In√≠cio da Jornada",
                    description: "Encontre a nave abandonada no setor 4",
                    xpReward: 200,
                    objectives: [
                        { description: "Chegar ao setor 4", completed: false },
                        { description: "Localizar a nave", completed: false },
                        { description: "Coletar dados da nave", completed: false }
                    ]
                },
                {
                    id: 2,
                    title: "Amea√ßa Alien√≠gena",
                    description: "Elimine os invasores alien√≠genas",
                    xpReward: 500,
                    objectives: [
                        { description: "Derrotar 5 inimigos", completed: false, target: 5, progress: 0 },
                        { description: "Proteger a base", completed: false }
                    ]
                }
            ]
        };

        // Estado do jogo
        const GameState = {
            initialized: false,
            paused: false,
            currentMission: 0,
            player: {
                x: 0,
                y: 0,
                velocityX: 0,
                velocityY: 0,
                isJumping: false,
                isFalling: false,
                health: GameConfig.player.health,
                shield: GameConfig.player.shield,
                xp: GameConfig.player.xp,
                level: GameConfig.player.level,
                currentWeapon: 'pistol',
                inventory: []
            },
            enemies: [],
            projectiles: [],
            particles: [],
            npcs: [],
            lastTime: 0,
            keys: {
                w: false,
                a: false,
                s: false,
                d: false,
                space: false,
                shift: false
            }
        };

        // Elementos DOM
        const DOM = {
            canvas: null,
            ctx: null,
            healthBar: null,
            shieldBar: null,
            weaponDisplay: null,
            ammoDisplay: null,
            missionDisplay: null,
            missionText: null,
            dialogueBox: null,
            mainMenu: null,
            pauseMenu: null,
            notification: null
        };

        // Inicializa√ß√£o do jogo
        function initGame() {
            // Configurar elementos DOM
            DOM.canvas = document.getElementById('game-canvas');
            DOM.ctx = DOM.canvas.getContext('2d');
            
            // Ajustar tamanho do canvas
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Configurar elementos de UI
            DOM.healthBar = document.getElementById('health-bar').querySelector('.fill');
            DOM.shieldBar = document.getElementById('shield-bar').querySelector('.fill');
            DOM.weaponDisplay = document.getElementById('weapon-icon');
            DOM.ammoDisplay = document.getElementById('ammo');
            DOM.missionDisplay = document.getElementById('mission-text');
            DOM.dialogueBox = document.getElementById('dialogue-box');
            DOM.mainMenu = document.getElementById('main-menu');
            DOM.pauseMenu = document.getElementById('pause-menu');
            DOM.notification = document.getElementById('notification');
            
            // Configurar eventos
            setupEventListeners();
            
            // Iniciar menu principal
            showMainMenu();
            
            // Carregar assets
            loadAssets().then(() => {
                console.log("Todos os assets foram carregados!");
                GameState.initialized = true;
            });
        }

        // Redimensionar canvas
        function resizeCanvas() {
            DOM.canvas.width = window.innerWidth;
            DOM.canvas.height = window.innerHeight;
            GameConfig.canvasWidth = window.innerWidth;
            GameConfig.canvasHeight = window.innerHeight;
        }

        // Configurar listeners de eventos
        function setupEventListeners() {
            // Teclado
            document.addEventListener('keydown', (e) => {
                switch(e.key.toLowerCase()) {
                    case 'w':
                    case 'arrowup': 
                        GameState.keys.w = true;
                        if (!GameState.player.isJumping && !GameState.player.isFalling) {
                            GameState.player.isJumping = true;
                            GameState.player.velocityY = -GameConfig.player.jumpForce;
                        }
                        break;
                    case 'a':
                    case 'arrowleft': GameState.keys.a = true; break;
                    case 's':
                    case 'arrowdown': GameState.keys.s = true; break;
                    case 'd':
                    case 'arrowright': GameState.keys.d = true; break;
                    case ' ': 
                        if (!GameState.player.isJumping && !GameState.player.isFalling) {
                            GameState.player.isJumping = true;
                            GameState.player.velocityY = -GameConfig.player.jumpForce;
                        }
                        break;
                    case 'shift': GameState.keys.shift = true; break;
                    case 'escape': togglePause(); break;
                    case 'r': reloadWeapon(); break;
                    case '1': switchWeapon('pistol'); break;
                    case '2': switchWeapon('rifle'); break;
                }
            });
            
            document.addEventListener('keyup', (e) => {
                switch(e.key.toLowerCase()) {
                    case 'w':
                    case 'arrowup': GameState.keys.w = false; break;
                    case 'a':
                    case 'arrowleft': GameState.keys.a = false; break;
                    case 's':
                    case 'arrowdown': GameState.keys.s = false; break;
                    case 'd':
                    case 'arrowright': GameState.keys.d = false; break;
                    case ' ': GameState.keys.space = false; break;
                    case 'shift': GameState.keys.shift = false; break;
                }
            });
            
            // Mouse
            DOM.canvas.addEventListener('mousedown', (e) => {
                if (!GameState.paused && GameState.initialized) {
                    fireWeapon(e.clientX, e.clientY);
                }
            });
            
            // Bot√µes do menu
            document.getElementById('new-game-btn').addEventListener('click', startNewGame);
            document.getElementById('continue-btn').addEventListener('click', continueGame);
            document.getElementById('settings-btn').addEventListener('click', showSettings);
            document.getElementById('resume-btn').addEventListener('click', togglePause);
            document.getElementById('missions-btn').addEventListener('click', showMissions);
            document.getElementById('inventory-btn').addEventListener('click', showInventory);
            document.getElementById('quit-btn').addEventListener('click', quitToMainMenu);
        }

        // Carregar assets
        async function loadAssets() {
            // Aqui voc√™ carregaria imagens, sons, etc.
            // Exemplo:
            // const playerSprite = await loadImage('assets/player.png');
            return Promise.resolve();
        }

        // Mostrar menu principal
        function showMainMenu() {
            DOM.mainMenu.classList.remove('hidden');
            // Aqui voc√™ poderia verificar se h√° um jogo salvo para habilitar o bot√£o CONTINUAR
        }

        // Iniciar novo jogo
        function startNewGame() {
            DOM.mainMenu.classList.add('hidden');
            resetGameState();
            startGameLoop();
            startMission(0);
            showNotification("Miss√£o iniciada: " + GameConfig.missions[0].description);
        }

        // Continuar jogo salvo
        function continueGame() {
            // Carregar estado salvo
            DOM.mainMenu.classList.add('hidden');
            startGameLoop();
        }

        // Mostrar configura√ß√µes
        function showSettings() {
            // Implementar menu de configura√ß√µes
            console.log("Configura√ß√µes abertas");
        }

        // Alternar pausa
        function togglePause() {
            if (!GameState.initialized) return;
            
            GameState.paused = !GameState.paused;
            DOM.pauseMenu.classList.toggle('hidden');
            
            if (GameState.paused) {
                // Pausar m√∫sica, etc.
            } else {
                // Retomar m√∫sica, etc.
            }
        }

        // Mostrar miss√µes
        function showMissions() {
            // Implementar menu de miss√µes
            console.log("Menu de miss√µes aberto");
        }

        // Mostrar invent√°rio
        function showInventory() {
            // Implementar menu de invent√°rio
            console.log("Invent√°rio aberto");
        }

        // Sair para o menu principal
        function quitToMainMenu() {
            GameState.paused = false;
            DOM.pauseMenu.classList.add('hidden');
            showMainMenu();
        }

        // Resetar estado do jogo
        function resetGameState() {
            GameState.player = {
                x: GameConfig.canvasWidth / 2,
                y: GameConfig.canvasHeight / 2,
                velocityX: 0,
                velocityY: 0,
                isJumping: false,
                isFalling: false,
                health: GameConfig.player.health,
                shield: GameConfig.player.shield,
                xp: 0,
                level: 1,
                currentWeapon: 'pistol',
                inventory: []
            };
            
            GameState.enemies = [];
            GameState.projectiles = [];
            GameState.particles = [];
            GameState.npcs = [];
            GameState.currentMission = 0;
            
            updateUI();
        }

        // Atualizar UI
        function updateUI() {
            // Atualizar barras de sa√∫de e escudo
            DOM.healthBar.style.width = `${(GameState.player.health / GameConfig.player.health) * 100}%`;
            DOM.shieldBar.style.width = `${(GameState.player.shield / GameConfig.player.shield) * 100}%`;
            
            // Atualizar arma e muni√ß√£o
            const weapon = GameConfig.weapons[GameState.player.currentWeapon];
            DOM.weaponDisplay.textContent = weapon.icon;
            DOM.ammoDisplay.textContent = `${weapon.ammo}/${weapon.maxAmmo}`;
            
            // Atualizar miss√£o
            if (GameState.currentMission !== null) {
                const mission = GameConfig.missions[GameState.currentMission];
                DOM.missionDisplay.textContent = mission.description;
            }
        }

        // Iniciar loop do jogo
        function startGameLoop() {
            GameState.lastTime = performance.now();
            requestAnimationFrame(gameLoop);
        }

        // Loop principal do jogo
        function gameLoop(timestamp) {
            if (GameState.paused) return;
            
            const deltaTime = (timestamp - GameState.lastTime) / 1000;
            GameState.lastTime = timestamp;
            
            // Limpar canvas
            DOM.ctx.fillStyle = GameConfig.backgroundColor;
            DOM.ctx.fillRect(0, 0, GameConfig.canvasWidth, GameConfig.canvasHeight);
            
            // Atualizar f√≠sica
            updatePhysics(deltaTime);
            
            // Atualizar entidades
            updateEntities(deltaTime);
            
            // Renderizar
            render();
            
            // Continuar loop
            requestAnimationFrame(gameLoop);
        }

        // Atualizar f√≠sica
        function updatePhysics(deltaTime) {
            // Movimento do jogador
            const playerSpeed = GameState.keys.shift ? GameConfig.player.speed * 1.5 : GameConfig.player.speed;
            
            GameState.player.velocityX = 0;
            if (GameState.keys.a) GameState.player.velocityX = -playerSpeed;
            if (GameState.keys.d) GameState.player.velocityX = playerSpeed;
            
            // Aplicar gravidade
            GameState.player.velocityY += GameConfig.gravity;
            
            // Atualizar posi√ß√£o
            GameState.player.x += GameState.player.velocityX;
            GameState.player.y += GameState.player.velocityY;
            
            // Limites do canvas
            if (GameState.player.x < 0) GameState.player.x = 0;
            if (GameState.player.x > GameConfig.canvasWidth) GameState.player.x = GameConfig.canvasWidth;
            
            // Verificar colis√£o com o ch√£o
            const groundLevel = GameConfig.canvasHeight - 100;
            if (GameState.player.y > groundLevel) {
                GameState.player.y = groundLevel;
                GameState.player.velocityY = 0;
                GameState.player.isJumping = false;
                GameState.player.isFalling = false;
            } else if (GameState.player.velocityY > 0) {
                GameState.player.isFalling = true;
            }
        }

        // Atualizar entidades
        function updateEntities(deltaTime) {
            // Atualizar proj√©teis
            GameState.projectiles.forEach((proj, index) => {
                proj.x += proj.velocityX * deltaTime * 60;
                proj.y += proj.velocityY * deltaTime * 60;
                
                // Verificar se saiu da tela
                if (proj.x < 0 || proj.x > GameConfig.canvasWidth || 
                    proj.y < 0 || proj.y > GameConfig.canvasHeight) {
                    proj.element.remove();
                    GameState.projectiles.splice(index, 1);
                }
            });
            
            // Atualizar inimigos (IA simples)
            GameState.enemies.forEach((enemy, index) => {
                // Movimento em dire√ß√£o ao jogador
                const dx = GameState.player.x - enemy.x;
                const dy = GameState.player.y - enemy.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 200) {
                    // Move na dire√ß√£o geral do jogador
                    enemy.x += (dx / distance) * enemy.speed * deltaTime * 60;
                    enemy.y += (dy / distance) * enemy.speed * deltaTime * 60;
                }
                
                enemy.element.style.left = `${enemy.x}px`;
                enemy.element.style.top = `${enemy.y}px`;
                
                // Remover se sair da tela
                if (enemy.x < -100 || enemy.x > GameConfig.canvasWidth + 100 ||
                    enemy.y < -100 || enemy.y > GameConfig.canvasHeight + 100) {
                    enemy.element.remove();
                    GameState.enemies.splice(index, 1);
                }
            });
        }

        // Renderizar cena
        function render() {
            // Desenhar fundo estelar
            DOM.ctx.fillStyle = '#000033';
            DOM.ctx.fillRect(0, 0, GameConfig.canvasWidth, GameConfig.canvasHeight);
            
            // Desenhar estrelas
            DOM.ctx.fillStyle = 'white';
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * GameConfig.canvasWidth;
                const y = Math.random() * GameConfig.canvasHeight;
                const size = Math.random() * 2;
                DOM.ctx.fillRect(x, y, size, size);
            }
            
            // Desenhar terreno (simplificado)
            DOM.ctx.fillStyle = '#2a2a4a';
            DOM.ctx.fillRect(0, GameConfig.canvasHeight - 100, GameConfig.canvasWidth, 100);
            
            // Desenhar jogador (simplificado)
            DOM.ctx.fillStyle = '#00a8ff';
            DOM.ctx.beginPath();
            DOM.ctx.arc(GameState.player.x, GameState.player.y, 20, 0, Math.PI * 2);
            DOM.ctx.fill();
            
            // Desenhar inimigos
            GameState.enemies.forEach(enemy => {
                DOM.ctx.fillStyle = '#ff4757';
                DOM.ctx.beginPath();
                DOM.ctx.arc(enemy.x, enemy.y, 20, 0, Math.PI * 2);
                DOM.ctx.fill();
                
                // Barra de sa√∫de
                DOM.ctx.fillStyle = 'red';
                DOM.ctx.fillRect(enemy.x - 20, enemy.y - 30, 40, 5);
                DOM.ctx.fillStyle = 'green';
                DOM.ctx.fillRect(enemy.x - 20, enemy.y - 30, 40 * (enemy.health / 100), 5);
            });
            
            // Desenhar proj√©teis
            GameState.projectiles.forEach(proj => {
                DOM.ctx.fillStyle = proj.color;
                DOM.ctx.beginPath();
                DOM.ctx.arc(proj.x, proj.y, 5, 0, Math.PI * 2);
                DOM.ctx.fill();
            });
            
            // Modo debug
            if (GameConfig.debugMode) {
                DOM.ctx.fillStyle = 'white';
                DOM.ctx.font = '12px Arial';
                DOM.ctx.fillText(`X: ${GameState.player.x.toFixed(1)} Y: ${GameState.player.y.toFixed(1)}`, 10, 20);
                DOM.ctx.fillText(`Inimigos: ${GameState.enemies.length}`, 10, 40);
                DOM.ctx.fillText(`Proj√©teis: ${GameState.projectiles.length}`, 10, 60);
            }
        }

        // Atirar arma
        function fireWeapon(targetX, targetY) {
            const now = Date.now();
            const weapon = GameConfig.weapons[GameState.player.currentWeapon];
            
            if (weapon.ammo <= 0) {
                reloadWeapon();
                return;
            }
            
            weapon.ammo--;
            updateUI();
            
            // Calcular dire√ß√£o
            const dx = targetX - GameState.player.x;
            const dy = targetY - GameState.player.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // Criar proj√©til
            const projectile = document.createElement('div');
            projectile.className = 'projectile';
            projectile.style.left = `${GameState.player.x}px`;
            projectile.style.top = `${GameState.player.y}px`;
            document.getElementById('game-container').appendChild(projectile);
            
            GameState.projectiles.push({
                element: projectile,
                x: GameState.player.x,
                y: GameState.player.y,
                velocityX: (dx / distance) * 10,
                velocityY: (dy / distance) * 10,
                damage: weapon.damage,
                color: '#feca57'
            });
            
            // Criar efeito de recuo
            GameState.player.x -= Math.cos(Math.atan2(dy, dx)) * 5;
        }

        // Recarregar arma
        function reloadWeapon() {
            const weapon = GameConfig.weapons[GameState.player.currentWeapon];
            
            if (weapon.ammo === weapon.maxAmmo) return;
            
            weapon.ammo = weapon.maxAmmo;
            updateUI();
            showNotification("Arma recarregada!");
        }

        // Trocar arma
        function switchWeapon(weaponType) {
            if (GameState.player.currentWeapon !== weaponType) {
                GameState.player.currentWeapon = weaponType;
                updateUI();
                showNotification(`Arma alterada para: ${GameConfig.weapons[weaponType].name}`);
            }
        }

        // Mostrar notifica√ß√£o
        function showNotification(text) {
            DOM.notification.querySelector('.notification-text').textContent = text;
            DOM.notification.classList.remove('hidden');
            
            setTimeout(() => {
                DOM.notification.classList.add('hidden');
            }, 3000);
        }

        // Iniciar miss√£o
        function startMission(missionIndex) {
            if (missionIndex >= GameConfig.missions.length) return;
            
            GameState.currentMission = missionIndex;
            const mission = GameConfig.missions[missionIndex];
            
            DOM.missionDisplay.textContent = mission.description;
            showNotification(`Nova miss√£o: ${mission.title}`);
            
            // Gerar inimigos baseado na miss√£o
            if (missionIndex === 1) {
                spawnEnemies(5);
            }
        }

        // Spawn de inimigos
        function spawnEnemies(count) {
            for (let i = 0; i < count; i++) {
                const enemy = document.createElement('div');
                enemy.className = 'enemy';
                
                const x = Math.random() * GameConfig.canvasWidth;
                const y = Math.random() * GameConfig.canvasHeight * 0.7;
                
                enemy.style.left = `${x}px`;
                enemy.style.top = `${y}px`;
                document.getElementById('game-container').appendChild(enemy);
                
                GameState.enemies.push({
                    element: enemy,
                    x: x,
                    y: y,
                    health: 100,
                    speed: 1 + Math.random() * 2
                });
            }
        }

        // Iniciar di√°logo
        function startDialogue(speaker, text, options) {
            document.getElementById('dialogue-speaker').textContent = speaker;
            document.getElementById('dialogue-text').textContent = text;
            
            const optionsContainer = document.getElementById('dialogue-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(option => {
                const btn = document.createElement('div');
                btn.className = 'dialogue-option';
                btn.textContent = option.text;
                btn.addEventListener('click', option.action);
                optionsContainer.appendChild(btn);
            });
            
            DOM.dialogueBox.classList.remove('hidden');
        }

        // Fechar di√°logo
        function closeDialogue() {
            DOM.dialogueBox.classList.add('hidden');
        }

        // Inicializar o jogo quando a p√°gina carregar
        window.addEventListener('load', initGame);
    </script>
</body>
</html>